<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOIF BarFinder - √âtude Express 2min</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            color: #333;
        }

        .form-container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .form-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px 20px;
            text-align: center;
        }

        .form-header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .timer {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            margin-top: 10px;
        }

        .form-content {
            padding: 25px 20px;
        }

        .question-block {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .question-title {
            font-weight: 700;
            margin-bottom: 15px;
            color: #2c3e50;
            font-size: 1rem;
        }

        .quick-select {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-bottom: 15px;
        }

        .quick-btn {
            padding: 10px 8px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 500;
            line-height: 1.2;
        }

        .quick-btn:hover {
            border-color: #667eea;
            transform: translateY(-1px);
        }

        .quick-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            margin-top: 10px;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .concept-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .concept-title {
            font-weight: 700;
            color: #667eea;
            margin-bottom: 8px;
        }

        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: rgba(255,255,255,0.9);
            width: 0%;
            transition: width 0.3s ease;
        }

        .hidden {
            display: none;
        }

        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
            max-width: 400px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        @media (max-width: 600px) {
            .form-container {
                margin: 0;
                border-radius: 0;
            }
            .quick-select {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <h1>üç∑ SOIF BarFinder</h1>
            <p>√âtude Express - Aide-nous √† r√©volutionner les sorties !</p>
            <div class="timer">‚è±Ô∏è 2 minutes chrono</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <form class="form-content" id="quickForm">
            <!-- Question 0: Type de r√©pondant -->
            <div class="question-block">
                <div class="question-title">Es-tu... ? üéØ</div>
                <div class="quick-select" data-question="profil_type">
                    <button type="button" class="quick-btn" data-value="client">Client de bars</button>
                    <button type="button" class="quick-btn" data-value="proprietaire">Propri√©taire de bar</button>
                    <button type="button" class="quick-btn" data-value="employe">Employ√© de bar</button>
                </div>
            </div>

            <!-- Questions CLIENT -->
            <div id="questionsClient">
                <!-- Question 1: Profil CLIENT -->
                <div class="question-block">
                    <div class="question-title">1. Tu as quel √¢ge et tu vis o√π ? üë§</div>
                    <div class="quick-select" data-question="age">
                        <button type="button" class="quick-btn" data-value="18-24">18-24 ans</button>
                        <button type="button" class="quick-btn" data-value="25-29">25-29 ans</button>
                        <button type="button" class="quick-btn" data-value="30-35">30-35 ans</button>
                        <button type="button" class="quick-btn" data-value="36+">36+ ans</button>
                    </div>
                    <input type="text" class="form-input" name="ville" placeholder="Ta ville (ex: Montpellier, Lyon...)" required>
                </div>

                <!-- Question 2: Habitudes CLIENT -->
                <div class="question-block">
                    <div class="question-title">2. Tu sors en bar combien de fois ? üçª</div>
                    <div class="quick-select" data-question="frequence">
                        <button type="button" class="quick-btn" data-value="plusieurs-semaine">Plusieurs/semaine</button>
                        <button type="button" class="quick-btn" data-value="une-semaine">1x/semaine</button>
                        <button type="button" class="quick-btn" data-value="plusieurs-mois">Plusieurs/mois</button>
                        <button type="button" class="quick-btn" data-value="une-mois">1x/mois</button>
                        <button type="button" class="quick-btn" data-value="rarement">Rarement</button>
                    </div>
                </div>

                <!-- Question 3: Recherche actuelle CLIENT -->
                <div class="question-block">
                    <div class="question-title">3. Comment tu trouves tes bars actuellement ? üîç</div>
                    <div class="quick-select" data-question="recherche" data-multiple="true">
                        <button type="button" class="quick-btn" data-value="google">Google Maps</button>
                        <button type="button" class="quick-btn" data-value="instagram">Instagram</button>
                        <button type="button" class="quick-btn" data-value="amis">Amis</button>
                        <button type="button" class="quick-btn" data-value="hasard">Au hasard</button>
                        <button type="button" class="quick-btn" data-value="tripadvisor">TripAdvisor</button>
                    </div>
                </div>
            </div>

            <!-- Questions PROPRIETAIRE -->
            <div id="questionsProprietaire" class="hidden">
                <!-- Question 1: Profil BAR -->
                <div class="question-block">
                    <div class="question-title">1. Ton bar c'est quoi ? üè™</div>
                    <input type="text" class="form-input" name="nom_bar" placeholder="Nom de ton √©tablissement">
                    <div class="quick-select" data-question="type_bar">
                        <button type="button" class="quick-btn" data-value="pub">Pub</button>
                        <button type="button" class="quick-btn" data-value="cocktails">Bar √† cocktails</button>
                        <button type="button" class="quick-btn" data-value="brasserie">Brasserie</button>
                        <button type="button" class="quick-btn" data-value="cave-vin">Cave √† vin</button>
                        <button type="button" class="quick-btn" data-value="rooftop">Rooftop</button>
                        <button type="button" class="quick-btn" data-value="lounge">Lounge</button>
                    </div>
                </div>

                <!-- Question 2: Localisation BAR -->
                <div class="question-block">
                    <div class="question-title">2. O√π es-tu situ√© ? üìç</div>
                    <input type="text" class="form-input" name="ville_bar" placeholder="Ville de ton bar" required>
                    <div class="quick-select" data-question="zone_bar">
                        <button type="button" class="quick-btn" data-value="centre-ville">Centre-ville</button>
                        <button type="button" class="quick-btn" data-value="quartier-etudiant">Quartier √©tudiant</button>
                        <button type="button" class="quick-btn" data-value="quartier-affaires">Quartier affaires</button>
                        <button type="button" class="quick-btn" data-value="peripherie">P√©riph√©rie</button>
                    </div>
                </div>

                <!-- Question 3: Client√®le BAR -->
                <div class="question-block">
                    <div class="question-title">3. Ta client√®le principale ? üë•</div>
                    <div class="quick-select" data-question="clientele_bar" data-multiple="true">
                        <button type="button" class="quick-btn" data-value="etudiants">√âtudiants</button>
                        <button type="button" class="quick-btn" data-value="jeunes-actifs">Jeunes actifs</button>
                        <button type="button" class="quick-btn" data-value="touristes">Touristes</button>
                        <button type="button" class="quick-btn" data-value="locaux">Habitu√©s locaux</button>
                        <button type="button" class="quick-btn" data-value="afterwork">Afterwork</button>
                    </div>
                </div>

                <!-- Question 4: Marketing actuel BAR -->
                <div class="question-block">
                    <div class="question-title">4. Comment tu attires tes clients actuellement ? üì¢</div>
                    <div class="quick-select" data-question="marketing_actuel" data-multiple="true">
                        <button type="button" class="quick-btn" data-value="instagram">Instagram</button>
                        <button type="button" class="quick-btn" data-value="facebook">Facebook</button>
                        <button type="button" class="quick-btn" data-value="google">Google My Business</button>
                        <button type="button" class="quick-btn" data-value="bouche-oreille">Bouche-√†-oreille</button>
                        <button type="button" class="quick-btn" data-value="affichage">Affichage</button>
                        <button type="button" class="quick-btn" data-value="evenements">√âv√©nements</button>
                    </div>
                </div>

                <!-- Question 5: Budget marketing BAR -->
                <div class="question-block">
                    <div class="question-title">5. Budget marketing/mois ? üí∞</div>
                    <div class="quick-select" data-question="budget_marketing">
                        <button type="button" class="quick-btn" data-value="0-200">0-200‚Ç¨</button>
                        <button type="button" class="quick-btn" data-value="200-500">200-500‚Ç¨</button>
                        <button type="button" class="quick-btn" data-value="500-1000">500-1000‚Ç¨</button>
                        <button type="button" class="quick-btn" data-value="1000+">1000‚Ç¨+</button>
                    </div>
                </div>

                <!-- Question 6: Probl√®mes actuels BAR -->
                <div class="question-block">
                    <div class="question-title">6. Tes plus gros d√©fis ? ‚ö°</div>
                    <div class="quick-select" data-question="defis_bar" data-multiple="true">
                        <button type="button" class="quick-btn" data-value="visibilite">Manque de visibilit√©</button>
                        <button type="button" class="quick-btn" data-value="nouveaux-clients">Attirer nouveaux clients</button>
                        <button type="button" class="quick-btn" data-value="fidelisation">Fid√©liser</button>
                        <button type="button" class="quick-btn" data-value="concurrence">Concurrence forte</button>
                        <button type="button" class="quick-btn" data-value="saisonnalite">Saisonnalit√©</button>
                        <button type="button" class="quick-btn" data-value="digital">Pr√©sence digitale</button>
                    </div>
                </div>
            </div>

            <!-- Concept SOIF - ADAPTATIF -->
            <div class="concept-box">
                <div class="concept-title">üí° Concept SOIF</div>
                <div id="conceptClient">
                    <p style="font-size: 0.9rem; line-height: 1.4;">
                        Une app qui trouve TON bar id√©al avec 140+ filtres ultra-pr√©cis 
                        (ambiance, musique, client√®le...) + r√©seau social g√©olocalis√© 
                        pour retrouver tes amis en temps r√©el üì±
                    </p>
                </div>
                <div id="conceptProprietaire" class="hidden">
                    <p style="font-size: 0.9rem; line-height: 1.4;">
                        Une plateforme qui am√®ne la client√®le id√©ale √† TON bar via 140+ filtres pr√©cis 
                        + outils marketing + analytics + communaut√© 15000+ utilisateurs + 0% commission<br>
                        <strong>üì¶ 3 formules :</strong> Fiche bar (20‚Ç¨) ‚Ä¢ Fiche + √âv√©nements (50‚Ç¨) ‚Ä¢ Acc√®s Communaut√© totale (100‚Ç¨/mois)
                    </p>
                </div>
            </div>

            <!-- Question INTERET - ADAPTATIF -->
            <div class="question-block">
                <div class="question-title" id="questionInteret">4. √áa te branche ? üöÄ</div>
                <!-- Pour clients -->
                <div class="quick-select" data-question="interet" id="interetClient">
                    <button type="button" class="quick-btn" data-value="tres-interesse">Je t√©l√©charge direct !</button>
                    <button type="button" class="quick-btn" data-value="interesse">Je testerais</button>
                    <button type="button" class="quick-btn" data-value="neutre">Peut-√™tre</button>
                    <button type="button" class="quick-btn" data-value="peu-interesse">Pas fou</button>
                </div>
                <!-- Pour propri√©taires -->
                <div class="quick-select" data-question="interet_bar" id="interetProprietaire" class="hidden">
                    <button type="button" class="quick-btn" data-value="tres-interesse">Je veux tester en priorit√© !</button>
                    <button type="button" class="quick-btn" data-value="interesse">√áa m'int√©resse</button>
                    <button type="button" class="quick-btn" data-value="neutre">Pourquoi pas</button>
                    <button type="button" class="quick-btn" data-value="peu-interesse">Pas convaincu</button>
                </div>
            </div>

            <!-- Question FONCTIONNALITES - ADAPTATIF -->
            <div class="question-block">
                <div class="question-title" id="questionFonctionnalites">5. Qu'est-ce qui te fait le plus envie ? ‚≠ê</div>
                <!-- Pour clients -->
                <div class="quick-select" data-question="fonctionnalites" data-multiple="true" id="fonctionnalitesClient">
                    <button type="button" class="quick-btn" data-value="filtres">140+ filtres pr√©cis</button>
                    <button type="button" class="quick-btn" data-value="amis-geo">Amis g√©olocalis√©s</button>
                    <button type="button" class="quick-btn" data-value="evenements">√âv√©nements</button>
                    <button type="button" class="quick-btn" data-value="scanner">Scanner menus</button>
                </div>
                <!-- Pour propri√©taires -->
                <div class="quick-select" data-question="fonctionnalites_bar" data-multiple="true" id="fonctionnalitesProprietaire" class="hidden">
                    <button type="button" class="quick-btn" data-value="clientele-ciblee">Client√®le cibl√©e</button>
                    <button type="button" class="quick-btn" data-value="analytics">Analytics d√©taill√©s</button>
                    <button type="button" class="quick-btn" data-value="zero-commission">0% commission</button>
                    <button type="button" class="quick-btn" data-value="communaute-15k">Acc√®s 15K utilisateurs</button>
                    <button type="button" class="quick-btn" data-value="evenements-bar">Cr√©ation √©v√©nements</button>
                    <button type="button" class="quick-btn" data-value="notifications-push">Notifications push cibl√©es</button>
                </div>
            </div>

            <!-- Question PRIX - ADAPTATIF -->
            <div class="question-block">
                <div class="question-title" id="questionPrix">6. Tu paierais combien ? üí∞</div>
                <!-- Pour clients -->
                <div class="quick-select" data-question="prix" id="prixClient">
                    <button type="button" class="quick-btn" data-value="5-euros">5‚Ç¨/an</button>
                    <button type="button" class="quick-btn" data-value="10-euros">10‚Ç¨/an</button>
                    <button type="button" class="quick-btn" data-value="gratuit">Que gratuit</button>
                    <button type="button" class="quick-btn" data-value="pub-ok">Gratuit + pub OK</button>
                </div>
                <!-- Pour propri√©taires -->
                <div class="quick-select" data-question="prix_bar" id="prixProprietaire" class="hidden">
                    <button type="button" class="quick-btn" data-value="20-euros">20‚Ç¨/mois<br><small>Fiche bar</small></button>
                    <button type="button" class="quick-btn" data-value="50-euros">50‚Ç¨/mois<br><small>+ √âv√©nements</small></button>
                    <button type="button" class="quick-btn" data-value="100-euros">100‚Ç¨/mois<br><small>+ Communaut√© 15K</small></button>
                    <button type="button" class="quick-btn" data-value="trop-cher">Trop cher</button>
                </div>
            </div>

            <!-- Question 7: G√©olocalisation (CLIENTS) ou ROI (PROPRIETAIRES) -->
            <div class="question-block">
                <div class="question-title" id="question7">7. Question sp√©cifique üì±</div>
                <!-- Pour clients -->
                <div id="question7Client">
                    <div class="question-title">Recevoir une notif quand tes amis sont dans un bar pr√®s de toi ?</div>
                    <div class="quick-select" data-question="notifications">
                        <button type="button" class="quick-btn" data-value="oui-genial">Oui, g√©nial !</button>
                        <button type="button" class="quick-btn" data-value="oui-parfois">Oui, parfois</button>
                        <button type="button" class="quick-btn" data-value="non-prive">Non, trop priv√©</button>
                    </div>
                </div>
                <!-- Pour propri√©taires -->
                <div id="question7Proprietaire" class="hidden">
                    <div class="question-title">Combien de nouveaux clients/mois tu veux attirer via SOIF ?</div>
                    <div class="quick-select" data-question="objectif_clients">
                        <button type="button" class="quick-btn" data-value="50-clients">+50 clients/mois</button>
                        <button type="button" class="quick-btn" data-value="100-clients">+100 clients/mois</button>
                        <button type="button" class="quick-btn" data-value="200-clients">+200 clients/mois</button>
                        <button type="button" class="quick-btn" data-value="500-clients">+500 clients/mois</button>
                    </div>
                </div>
            </div>

            <!-- Question 8: Recommandation -->
            <div class="question-block">
                <div class="question-title">8. Tu recommanderais SOIF √† tes amis ? üî•</div>
                <div class="quick-select" data-question="recommandation">
                    <button type="button" class="quick-btn" data-value="10">Carr√©ment ! 10/10</button>
                    <button type="button" class="quick-btn" data-value="8">Oui 8/10</button>
                    <button type="button" class="quick-btn" data-value="6">Peut-√™tre 6/10</button>
                    <button type="button" class="quick-btn" data-value="4">Bof 4/10</button>
                </div>
            </div>

            <!-- Contact et Email -->
            <div class="question-block">
                <div class="question-title">9. Ton email pour qu'on te tienne au courant ? üìß</div>
                <input type="email" class="form-input" name="email" placeholder="ton.email@exemple.com" required>
                <div class="quick-select" data-question="contact">
                    <button type="button" class="quick-btn" data-value="beta">Oui + b√™ta test prioritaire</button>
                    <button type="button" class="quick-btn" data-value="infos">Juste les infos de lancement</button>
                    <button type="button" class="quick-btn" data-value="non-mais-email">Email obligatoire pour l'√©tude</button>
                </div>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">
                üöÄ Envoyer (2min chrono respect√© !)
            </button>

            <p style="text-align: center; margin-top: 15px; font-size: 0.8rem; color: #6c757d;">
                üîí Donn√©es s√©curis√©es ‚Ä¢ üéØ Pour Station F Round 2
            </p>
        </form>
    </div>

    <script>
        const formData = {};
        
        // URL Google Apps Script configur√©e
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyQfpF5M4iq1dkdp_n6DG_uYPeXIEb9dXdZrOwC2fLL1d71uXSTHVU7zPGSsqadTZdLFQ/exec';

        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ SOIF Questionnaire initialis√©');
            console.log('üìä Google Sheet URL configur√©e:', GOOGLE_SCRIPT_URL);
            setupEventListeners();
        });

        function setupEventListeners() {
            // Gestion du type de profil
            document.querySelectorAll('[data-question="profil_type"] .quick-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    handleProfilTypeSelection(this.dataset.value);
                });
            });

            // Gestion des boutons de s√©lection
            document.querySelectorAll('.quick-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    handleButtonClick(this);
                });
            });

            // Gestion des inputs text/email
            document.querySelectorAll('input[type="text"], input[type="email"]').forEach(input => {
                input.addEventListener('input', function() {
                    formData[this.name] = this.value;
                    updateProgress();
                });
            });

            // Gestion de la soumission
            document.getElementById('quickForm').addEventListener('submit', handleFormSubmit);
        }

        function handleProfilTypeSelection(profilType) {
            formData.profil_type = profilType;
            console.log('üë§ Profil s√©lectionn√©:', profilType);
            
            if (profilType === 'proprietaire' || profilType === 'employe') {
                // Afficher sections propri√©taires
                document.getElementById('questionsClient').classList.add('hidden');
                document.getElementById('questionsProprietaire').classList.remove('hidden');
                
                document.getElementById('conceptClient').classList.add('hidden');
                document.getElementById('conceptProprietaire').classList.remove('hidden');
                
                document.getElementById('interetClient').classList.add('hidden');
                document.getElementById('interetProprietaire').classList.remove('hidden');
                
                document.getElementById('fonctionnalitesClient').classList.add('hidden');
                document.getElementById('fonctionnalitesProprietaire').classList.remove('hidden');
                
                document.getElementById('prixClient').classList.add('hidden');
                document.getElementById('prixProprietaire').classList.remove('hidden');
                
                document.getElementById('question7Client').classList.add('hidden');
                document.getElementById('question7Proprietaire').classList.remove('hidden');
                
                // Mettre √† jour les titres
                document.getElementById('questionInteret').textContent = '4. SOIF pour ton business ? üöÄ';
                document.getElementById('questionFonctionnalites').textContent = '5. Quels outils t\'int√©ressent le plus ? ‚≠ê';
                document.getElementById('questionPrix').textContent = '6. Quel budget marketing/mois ? üí∞';
                
            } else {
                // Afficher sections clients
                document.getElementById('questionsClient').classList.remove('hidden');
                document.getElementById('questionsProprietaire').classList.add('hidden');
                
                document.getElementById('conceptClient').classList.remove('hidden');
                document.getElementById('conceptProprietaire').classList.add('hidden');
                
                document.getElementById('interetClient').classList.remove('hidden');
                document.getElementById('interetProprietaire').classList.add('hidden');
                
                document.getElementById('fonctionnalitesClient').classList.remove('hidden');
                document.getElementById('fonctionnalitesProprietaire').classList.add('hidden');
                
                document.getElementById('prixClient').classList.remove('hidden');
                document.getElementById('prixProprietaire').classList.add('hidden');
                
                document.getElementById('question7Client').classList.remove('hidden');
                document.getElementById('question7Proprietaire').classList.add('hidden');
                
                // Remettre les titres clients
                document.getElementById('questionInteret').textContent = '4. √áa te branche ? üöÄ';
                document.getElementById('questionFonctionnalites').textContent = '5. Qu\'est-ce qui te fait le plus envie ? ‚≠ê';
                document.getElementById('questionPrix').textContent = '6. Tu paierais combien ? üí∞';
            }
            //document.querySelectorAll('.hidden input').forEach(input => {
    input.disabled = true;
  });
  document.querySelectorAll(':not(.hidden) input').forEach(input => {
    input.disabled = false;
  });       
            updateProgress();
        }

        function handleButtonClick(btn) {
            const questionGroup = btn.closest('.quick-select');
            const questionName = questionGroup.dataset.question;
            const value = btn.dataset.value;
            const isMultiple = questionGroup.dataset.multiple === 'true';
            
            if (isMultiple) {
                // Multi-s√©lection
                btn.classList.toggle('selected');
                if (!formData[questionName]) formData[questionName] = [];
                
                if (btn.classList.contains('selected')) {
                    if (!formData[questionName].includes(value)) {
                        formData[questionName].push(value);
                    }
                } else {
                    formData[questionName] = formData[questionName].filter(v => v !== value);
                }
            } else {
                // S√©lection unique
                questionGroup.querySelectorAll('.quick-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                formData[questionName] = value;
                
                // Gestion sp√©ciale pour le type de profil
                if (questionName === 'profil_type') {
                    handleProfilTypeSelection(value);
                    return;
                }
            }
            
            console.log('‚úÖ R√©ponse enregistr√©e:', questionName, '=', formData[questionName]);
            updateProgress();
        }

        function updateProgress() {
            const isProprietaire = formData.profil_type === 'proprietaire' || formData.profil_type === 'employe';
            let requiredAnswers = [];
            
            if (isProprietaire) {
                requiredAnswers = ['profil_type', 'type_bar', 'zone_bar', 'clientele_bar', 'marketing_actuel', 'budget_marketing', 'defis_bar', 'interet_bar', 'fonctionnalites_bar', 'prix_bar', 'objectif_clients', 'recommandation', 'contact', 'email'];
            } else {
                requiredAnswers = ['profil_type', 'age', 'frequence', 'recherche', 'interet', 'fonctionnalites', 'prix', 'notifications', 'recommandation', 'contact', 'email'];
            }
            
            const answeredCount = requiredAnswers.filter(q => {
                if (q === 'email') return formData.email && formData.email.includes('@');
                return formData[q] && (Array.isArray(formData[q]) ? formData[q].length > 0 : true);
            }).length;
            
            const progress = (answeredCount / requiredAnswers.length) * 100;
            document.getElementById('progressFill').style.width = Math.min(progress, 100) + '%';
            
            console.log('üìä Progression:', Math.round(progress) + '%', `(${answeredCount}/${requiredAnswers.length})`);
        }

        async function envoyerVersGoogleSheets(data) {
            console.log('üì§ Envoi vers Google Sheets...', data);
            
            try {
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                console.log('‚úÖ Envoi r√©ussi vers Google Sheets');
                return true; // no-cors ne retourne pas de r√©ponse lisible
            } catch (error) {
                console.error('‚ùå Erreur envoi Google Sheets:', error);
                return false;
            }
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            console.log('üöÄ Soumission du formulaire...');
            
            // Validation
            const isProprietaire = formData.profil_type === 'proprietaire' || formData.profil_type === 'employe';
            
            if (!formData.profil_type) {
                alert('üéØ Dis-nous d\'abord qui tu es !');
                return;
            }
            
            if (!formData.email || !formData.email.includes('@')) {
                alert('üìß Ton email est obligatoire pour l\'√©tude !');
                return;
            }
            
            if (isProprietaire) {
                if (!formData.ville_bar || formData.ville_bar.length < 2) {
                    alert('üè™ N\'oublie pas la ville de ton bar !');
                    return;
                }
                if (!formData.interet_bar) {
                    alert('‚ö° Il manque ton avis sur SOIF !');
                    return;
                }
            } else {
                if (!formData.ville || formData.ville.length < 2) {
                    alert('üèôÔ∏è N\'oublie pas ta ville !');
                    return;
                }
                if (!formData.age || !formData.interet) {
                    alert('‚ö° Il manque quelques r√©ponses importantes !');
                    return;
                }
            }
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.innerHTML = '‚è≥ Envoi en cours...';
            submitBtn.disabled = true;
            
            // Pr√©parer les donn√©es pour Google Sheets
            const dataToSend = {
                timestamp: new Date().toISOString(),
                ...formData,
                // Convertir les arrays en strings pour Google Sheets
                recherche: Array.isArray(formData.recherche) ? formData.recherche.join(', ') : formData.recherche || '',
                clientele_bar: Array.isArray(formData.clientele_bar) ? formData.clientele_bar.join(', ') : formData.clientele_bar || '',
                marketing_actuel: Array.isArray(formData.marketing_actuel) ? formData.marketing_actuel.join(', ') : formData.marketing_actuel || '',
                defis_bar: Array.isArray(formData.defis_bar) ? formData.defis_bar.join(', ') : formData.defis_bar || '',
                fonctionnalites: Array.isArray(formData.fonctionnalites) ? formData.fonctionnalites.join(', ') : formData.fonctionnalites || '',
                fonctionnalites_bar: Array.isArray(formData.fonctionnalites_bar) ? formData.fonctionnalites_bar.join(', ') : formData.fonctionnalites_bar || ''
            };
            
            console.log('üìã Donn√©es finales √† envoyer:', dataToSend);
            
            // Envoyer vers Google Sheets
            const success = await envoyerVersGoogleSheets(dataToSend);
            
            if (success) {
                submitBtn.innerHTML = '‚úÖ Merci ! C\'√©tait rapide üöÄ';
                submitBtn.style.background = '#28a745';
                
                console.log('üéâ Formulaire envoy√© avec succ√®s !');
                
                // Afficher message de confirmation
                setTimeout(() => {
                    showSuccessMessage();
                }, 1000);
            } else {
                submitBtn.innerHTML = '‚ùå Erreur - R√©essaie';
                submitBtn.style.background = '#dc3545';
                submitBtn.disabled = false;
                
                console.log('‚ùå √âchec de l\'envoi');
                
                setTimeout(() => {
                    submitBtn.innerHTML = 'üöÄ Envoyer (2min chrono respect√© !)';
                    submitBtn.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                }, 3000);
            }
        }

        function showSuccessMessage() {
            const overlay = document.createElement('div');
            overlay.className = 'overlay';
            
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `
                <h2 style="color: #667eea; margin-bottom: 15px;">üéâ Parfait !</h2>
                <p style="margin-bottom: 15px;">Tes r√©ponses vont nous aider pour Station F !</p>
                <p style="font-size: 0.9rem; color: #6c757d; margin-bottom: 15px;">
                    Donn√©es envoy√©es vers Google Sheets avec succ√®s üìä
                </p>
                <p style="font-size: 0.9rem; color: #6c757d;">On te tient au courant tr√®s bient√¥t üöÄ</p>
                <button onclick="closeSuccessMessage()" style="margin-top: 15px; padding: 8px 15px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Cool !</button>
            `;
            
            document.body.appendChild(overlay);
            document.body.appendChild(successDiv);
        }

        function closeSuccessMessage() {
            const overlay = document.querySelector('.overlay');
            const successMessage = document.querySelector('.success-message');
            if (overlay) overlay.remove();
            if (successMessage) successMessage.remove();
        }

        // Animation d'entr√©e
        setTimeout(() => {
            const container = document.querySelector('.form-container');
            if (container) {
                container.style.transform = 'scale(1)';
                container.style.opacity = '1';
            }
        }, 100);

        // Test de connexion Google Sheets au chargement (optionnel)
        async function testConnexionGoogleSheets() {
            console.log('üîó Test de connexion Google Sheets...');
            try {
                const testData = {
                    timestamp: new Date().toISOString(),
                    test: 'connexion'
                };
                
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                console.log('‚úÖ Connexion Google Sheets OK');
            } catch (error) {
                console.warn('‚ö†Ô∏è Probl√®me de connexion Google Sheets:', error);
            }
        }

        // D√©commenter pour tester la connexion au chargement
        // testConnexionGoogleSheets();
    </script>
</body>
</html>
